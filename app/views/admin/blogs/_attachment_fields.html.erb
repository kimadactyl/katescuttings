<div class="attachment-card" data-new-record="<%= attachment.new_record? %>">
  <div class="attachment-card__image">
    <% if attachment.image.attached? %>
      <%= image_tag attachment.image.variant(resize_to_fill: [150, 150]), class: 'attachment-card__preview' %>
    <% else %>
      <div class="attachment-card__placeholder">
        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
          <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
          <circle cx="8.5" cy="8.5" r="1.5"></circle>
          <polyline points="21 15 16 10 5 21"></polyline>
        </svg>
        <span>Choose image</span>
      </div>
      <img class="attachment-card__preview" style="display: none;">
    <% end %>
    <%= f.file_field :image,
        direct_upload: true,
        accept: 'image/*',
        class: 'attachment-card__input',
        data: { action: 'change->attachments#preview' } %>
  </div>

  <div class="attachment-card__fields">
    <div class="attachment-card__field">
      <%= f.label :title, "Caption", class: 'attachment-card__label' %>
      <%= f.text_field :title, placeholder: "Caption shown in lightbox", class: 'attachment-card__text' %>
    </div>
    <div class="attachment-card__field">
      <%= f.label :alt_text, "Alt text", class: 'attachment-card__label' %>
      <%= f.text_field :alt_text, placeholder: "Description for accessibility", class: 'attachment-card__text' %>
    </div>
  </div>

  <div class="attachment-card__actions">
    <%= f.hidden_field :_destroy, value: '0' %>
    <button type="button" class="attachment-card__remove" data-action="click->attachments#remove">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <polyline points="3 6 5 6 21 6"></polyline>
        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
      </svg>
      Remove
    </button>
    <div class="attachment-card__undo" style="display: none;">
      <span>Will be deleted on save.</span>
      <button type="button" data-action="click->attachments#undo">Undo</button>
    </div>
  </div>
</div>
